import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import org.apache.commons.codec.binary.Base64;
import com.google.gson.Gson;
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;
import com.google.gson.JsonParser;

public class WebSearch {
	
	public static String API_KEY = "OZJLisXlGzYkM02G/XphKCkIx6aWhUe+IYPNAN9ZEEk";
	
	public ArrayList<SearchResult> searchResults;	
	
	public WebSearch(){
		this.searchResults = new ArrayList<SearchResult>();
	}
	
    public void getTopSearchSummaries(String query) {    	
    	
    	//We have can query BING only 5000 times a month. I've saved a sample JSON response in getJSONSearchResults  
    	String response = getJSONSearchResults();
    	
    	//Uncomment this line if you want to actually go out to the network and get search results.
    	//String response = search(query);    	
    	
    	Gson gson = new Gson();  
        JsonParser jsonParser = new JsonParser();
        JsonElement jsonElement = jsonParser.parse(response);
        JsonArray resultsArray = jsonElement.getAsJsonObject().get("d").getAsJsonObject().get("results").getAsJsonArray();
        
        for(JsonElement jsonResult : resultsArray){
        	SearchResult searchResult = gson.fromJson(jsonResult, SearchResult.class);
        	this.searchResults.add(searchResult);
        }        
        
        System.out.println(searchResults);
    }
    

    public static String getJSONSearchResults(){
    	return "{\"d\":{\"results\":[{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=0&$top=1\",\"type\":\"WebResult\"},\"ID\":\"9e689b54-bf5c-4c35-b003-4a1914ba6b12\",\"Title\":\"Louvre Museum Official Website - Site officiel du musée ...\",\"Description\":\"Most viewed pages. Search the Collection; Search louvre.fr; Selected Works; Visitor Trails; Advance Tickets ; Calendar. Thursday Mar 12. Featured events. Exhibition\",\"DisplayUrl\":\"www.louvre.fr/en\",\"Url\":\"http://www.louvre.fr/en\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=1&$top=1\",\"type\":\"WebResult\"},\"ID\":\"c7796d1d-4d9e-40c5-84b4-aba1887bd109\",\"Title\":\"Louvre - Wikipedia, the free encyclopedia\",\"Description\":\"The Louvre or the Louvre Museum is one of the world\u0027s largest museums and a historic monument. A central landmark of Paris, France, it is located on the Right Bank of ...\",\"DisplayUrl\":\"en.wikipedia.org/wiki/Lourve\",\"Url\":\"http://en.wikipedia.org/wiki/Lourve\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=2&$top=1\",\"type\":\"WebResult\"},\"ID\":\"0a77b895-295b-4460-abea-60a95e09572e\",\"Title\":\"How To Enjoy the Louvre Museum in Paris - About.com Travel\",\"Description\":\"The Louvre Museum in Paris is immense, and one could spend a week exploring its exhibits. Unfortunately, most of us don\u0027t have that kind of time.\",\"DisplayUrl\":\"gofrance.about.com/od/parisattractions/ht/louvre.htm\",\"Url\":\"http://gofrance.about.com/od/parisattractions/ht/louvre.htm\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=3&$top=1\",\"type\":\"WebResult\"},\"ID\":\"44e9098f-349a-44a0-aaa4-6eda117064fa\",\"Title\":\"Site officiel du musée du Louvre\",\"Description\":\"Evénement. La Victoire de Samothrace. Redécouvrez le chef-d\u0027oeuvre après sa restauration. Aile Denon, 1er étage, escalier Daru\",\"DisplayUrl\":\"www.louvre.fr\",\"Url\":\"http://www.louvre.fr/\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=4&$top=1\",\"type\":\"WebResult\"},\"ID\":\"6d3d5350-ec2b-4e31-a2a1-ee8e39378c15\",\"Title\":\"Louvre, Paris - A View On Cities\",\"Description\":\"The Louvre, originally a royal palace but now the world\u0027s most famous museum, is a must-visit for anyone with a slight interest in art. Some of the museum\u0027s most ...\",\"DisplayUrl\":\"www.aviewoncities.com/paris/louvre.htm\",\"Url\":\"http://www.aviewoncities.com/paris/louvre.htm\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=5&$top=1\",\"type\":\"WebResult\"},\"ID\":\"af3ee267-4de2-4606-9911-6b54e3ee819a\",\"Title\":\"Le Musee du Louvre - The Louvre Museum - Discover France ...\",\"Description\":\"One the world\u0027s great art museums, the Louvre is an immense complex of buildings erected in Paris over a span of four centuries. Originally a royal fortress and ...\",\"DisplayUrl\":\"www.discoverfrance.net/France/Paris/Museums-Paris/Louvre.shtml\",\"Url\":\"http://www.discoverfrance.net/France/Paris/Museums-Paris/Louvre.shtml\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=6&$top=1\",\"type\":\"WebResult\"},\"ID\":\"d5f93be6-e723-4e56-909c-e6c8f8a54d09\",\"Title\":\"Louvre Museum | museum, Paris, France | Encyclopedia ...\",\"Description\":\"Louvre Museum, French Musée du Louvre, official name Great Louvre, French Grand Louvre, national museum and art gallery of France, housed in part of a large palace ...\",\"DisplayUrl\":\"www.britannica.com/EBchecked/topic/349409\",\"Url\":\"http://www.britannica.com/EBchecked/topic/349409/Louvre-Museum\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=7&$top=1\",\"type\":\"WebResult\"},\"ID\":\"3e033d01-1162-46b8-85d4-dc17c43222ef\",\"Title\":\"Louvre Palace - Wikipedia, the free encyclopedia\",\"Description\":\"The Louvre Palace is a former royal palace located on the Right Bank of the Seine in Paris, between the Tuileries Gardens and the church of Saint-Germain l\u0027Auxerrois.\",\"DisplayUrl\":\"en.wikipedia.org/wiki/Louvre_Palace\",\"Url\":\"http://en.wikipedia.org/wiki/Louvre_Palace\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=8&$top=1\",\"type\":\"WebResult\"},\"ID\":\"61c1f339-bcc9-45b4-901d-8564ae115185\",\"Title\":\"Louvre, Paris, France: 790 reviews, 1,576 photos plus top ...\",\"Description\":\"Louvre: 790 reviews plus opinions, photos and top deals from real travelers and locals in Paris, France. Ranked #4 of 276 top Things To Do in Paris, France on ...\",\"DisplayUrl\":\"www.virtualtourist.com/travel/Europe/France/Ile_de_France/Paris...\",\"Url\":\"http://www.virtualtourist.com/travel/Europe/France/Ile_de_France/Paris-99080/Things_To_Do-Paris-Louvre-BR-1.html\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=9&$top=1\",\"type\":\"WebResult\"},\"ID\":\"ca478517-a8d7-48b8-affe-2bf4544ce4ff\",\"Title\":\"Louvre | Define Louvre at Dictionary.com\",\"Description\":\"noun 1. any of a set of horizontal parallel slats in a door or window, sloping outwards to throw off rain and admit air Also called louvre boards. the slats together ...\",\"DisplayUrl\":\"dictionary.reference.com/browse/Louvre\",\"Url\":\"http://dictionary.reference.com/browse/Louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=10&$top=1\",\"type\":\"WebResult\"},\"ID\":\"859f556b-444a-485c-914e-b90d99616d50\",\"Title\":\"Louvre - Times Topics - The New York Times\",\"Description\":\"News about the Louvre. Commentary and archival information about the Louvre from The New York Times.\",\"DisplayUrl\":\"topics.nytimes.com/top/reference/timestopics/organizations/l/louvre\",\"Url\":\"http://topics.nytimes.com/top/reference/timestopics/organizations/l/louvre/index.html\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=11&$top=1\",\"type\":\"WebResult\"},\"ID\":\"dc240bc3-d8d7-4e9c-8298-2e1208af12f7\",\"Title\":\"Louvre Facts, information, pictures | Encyclopedia.com ...\",\"Description\":\"Louvre (lōō´vrə), foremost French museum of art, located in Paris. The building was a royal fortress and palace built by Philip II in the late 12th cent.\",\"DisplayUrl\":\"www.encyclopedia.com/topic/Louvre.aspx\",\"Url\":\"http://www.encyclopedia.com/topic/Louvre.aspx\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=12&$top=1\",\"type\":\"WebResult\"},\"ID\":\"cdd764e7-ef2f-428b-8a78-c3224e8b0071\",\"Title\":\"louvre - definition of louvre by The Free Dictionary\",\"Description\":\"I spent long hours in the Louvre, the most friendly of all galleries and the most convenient for meditation; or idled on the quays, fingering second-hand books that I ...\",\"DisplayUrl\":\"www.thefreedictionary.com/louvre\",\"Url\":\"http://www.thefreedictionary.com/louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=13&$top=1\",\"type\":\"WebResult\"},\"ID\":\"99136fba-f008-4f1d-a75b-18446f38f951\",\"Title\":\"Louvre - Wikipedia for Schools\",\"Description\":\"The Louvre (French: Musée du Louvre) in Paris, France, is the most visited and famous museum in the world. The structure is located on the Right Bank in the 1 er ...\",\"DisplayUrl\":\"schools-wikipedia.org/wp/l/Louvre.htm\",\"Url\":\"http://schools-wikipedia.org/wp/l/Louvre.htm\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=14&$top=1\",\"type\":\"WebResult\"},\"ID\":\"b532f027-645e-402d-9f01-1b860122c179\",\"Title\":\"Louvre Tours, Trips & Tickets - Paris Attractions | Viator.com\",\"Description\":\"The Louvre may be the world\u0027s greatest art museum. Don\u0027t be daunted by its size and overwhelming richness; if you have even the merest interest in the fruits of human ...\",\"DisplayUrl\":\"www.viator.com/Paris-attractions/Louvre/d479-a73\",\"Url\":\"http://www.viator.com/Paris-attractions/Louvre/d479-a73\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=15&$top=1\",\"type\":\"WebResult\"},\"ID\":\"ca3f527c-9e32-4143-9394-e1fe998492a0\",\"Title\":\"The Louvre Museum: Facts, Paintings & Tickets\",\"Description\":\"The Louvre is the world’s largest museum and houses one of the most impressive art collections in history. The magnificent, baroque-style palace and museum ...\",\"DisplayUrl\":\"www.livescience.com/31935-louvre-museum.html\",\"Url\":\"http://www.livescience.com/31935-louvre-museum.html\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=16&$top=1\",\"type\":\"WebResult\"},\"ID\":\"859c2c0e-bea9-492b-ab43-333561a8f5bc\",\"Title\":\"The Louvre Museum in Paris - Visitor Information\",\"Description\":\"A complete overview of the Louvre Museum in Paris, France, including opening hours, collection highlights, and tons of helpful tips for visitors.\",\"DisplayUrl\":\"goparis.about.com/od/parismuseums/a/Louvre_Museum.htm\",\"Url\":\"http://goparis.about.com/od/parismuseums/a/Louvre_Museum.htm\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=17&$top=1\",\"type\":\"WebResult\"},\"ID\":\"827b016c-85ae-47b3-8576-a6306dbace26\",\"Title\":\"Musee du Louvre (Paris, France) on TripAdvisor: Hours ...\",\"Description\":\"Musee du Louvre, Paris: See 33,931 reviews, articles, and 12,242 photos of Musee du Louvre, ranked No.4 on TripAdvisor among 1,115 attractions in Paris.\",\"DisplayUrl\":\"www.tripadvisor.com/Attraction_Review-g187147-d188757\",\"Url\":\"http://www.tripadvisor.com/Attraction_Review-g187147-d188757-Reviews-Musee_du_Louvre-Paris_Ile_de_France.html\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=18&$top=1\",\"type\":\"WebResult\"},\"ID\":\"a135248f-9034-402e-b8c9-50d363bf6751\",\"Title\":\"The Louvre - Louvre Museum - Online Travel Guides of ...\",\"Description\":\"The Louvre. Find information on the history of Louvre Museum, Louvre Tours, and other museums in France.\",\"DisplayUrl\":\"www.destination360.com/europe/france/paris/musee-du-louvre\",\"Url\":\"http://www.destination360.com/europe/france/paris/musee-du-louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=19&$top=1\",\"type\":\"WebResult\"},\"ID\":\"173657b3-fd43-4c13-8ddb-0adabdd69fbb\",\"Title\":\"Louvre Museum - Paris Digest\",\"Description\":\"Louvre Museum paintings. The famous Louvre Museum in Paris is the world\u0027s most visited museum with 9.2 million visitors/year. The Louvre Museum displays the famous ...\",\"DisplayUrl\":\"www.parisdigest.com/museums/museedulouvre.htm\",\"Url\":\"http://www.parisdigest.com/museums/museedulouvre.htm\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=20&$top=1\",\"type\":\"WebResult\"},\"ID\":\"5522b347-883c-4678-8fa8-b07b41f0024e\",\"Title\":\"Amazon.com: The Louvre: Charles Boyer, John Sughrue Jr ...\",\"Description\":\"A guided tour through the Louvre and a presentation of the history of this world-famous French landmark, showing how it became the scene of many world-shaking events ...\",\"DisplayUrl\":\"www.amazon.com/The-Louvre-Charles-Boyer/dp/B0009MDPTC\",\"Url\":\"http://www.amazon.com/The-Louvre-Charles-Boyer/dp/B0009MDPTC\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=21&$top=1\",\"type\":\"WebResult\"},\"ID\":\"2ad8772d-82c0-4705-aa9c-3cfbadf3a0aa\",\"Title\":\"The Louvre | Virtualsweden /project/louvre\",\"Description\":\"The Musée du Louvre or officially the Grand Louvre — in English, the Louvre Museum or Great Louvre, or simply the Louvre — is the largest national museum of ...\",\"DisplayUrl\":\"www.virtualsweden.se/project/louvre\",\"Url\":\"http://www.virtualsweden.se/project/louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=22&$top=1\",\"type\":\"WebResult\"},\"ID\":\"3c48f3be-6f76-4286-9c02-ced4ff159786\",\"Title\":\"Louvre Pyramid, Paris - A View On Cities\",\"Description\":\"The Louvre Pyramid, the modern glass entrance of the Louvre Museum in Paris\",\"DisplayUrl\":\"www.aviewoncities.com/paris/louvrepyramid.htm\",\"Url\":\"http://www.aviewoncities.com/paris/louvrepyramid.htm\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=23&$top=1\",\"type\":\"WebResult\"},\"ID\":\"60f65a74-efaa-47eb-92a2-1bba4fb51fd5\",\"Title\":\"Avoid the long lines by not going in... - Musee du Louvre\",\"Description\":\"Musee du Louvre: Avoid the long lines by not going in through the pyramid... - See 33,940 traveler reviews, 12,260 candid photos, and great deals for Paris ...\",\"DisplayUrl\":\"www.tripadvisor.com/...Musee_du_Louvre-Paris_Ile_de_France.html\",\"Url\":\"http://www.tripadvisor.com/ShowUserReviews-g187147-d188757-r4301236-Musee_du_Louvre-Paris_Ile_de_France.html\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=24&$top=1\",\"type\":\"WebResult\"},\"ID\":\"9ef7275a-f000-44ba-90c3-eaca2f1777fe\",\"Title\":\"403 Reviews - Louvre | Viator - Tours, sightseeing tours ...\",\"Description\":\"Louvre: Check out 403 reviews from Viator travelers\",\"DisplayUrl\":\"www.viator.com/Paris-attractions/Louvre-reviews/d479-a73\",\"Url\":\"http://www.viator.com/Paris-attractions/Louvre-reviews/d479-a73\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=25&$top=1\",\"type\":\"WebResult\"},\"ID\":\"1d008bfb-1b85-487d-9d57-f5ddbdd81ff5\",\"Title\":\"Hôtel du Louvre , a Hyatt hotel ( Paris , France) | Expedia\",\"Description\":\"Book the Hôtel du Louvre, a Hyatt hotel from \\$274.82 - Situated in the heart of the Paris, between the Louvre Museum, the Opera Garnier and the Palais Royal. Place ...\",\"DisplayUrl\":\"www.expedia.com/Paris-Hotels-Hotel-Du-Louvre.h21803.Hotel-Information\",\"Url\":\"http://www.expedia.com/Paris-Hotels-Hotel-Du-Louvre.h21803.Hotel-Information\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=26&$top=1\",\"type\":\"WebResult\"},\"ID\":\"da8ebd9b-6c6d-4444-a9a2-238806818ab6\",\"Title\":\"Musée du Louvre - Paris, France - Museum, Historical ...\",\"Description\":\"Musée du Louvre, Paris, France. 1,675,432 likes · 49,431 talking about this · 1,358,155 were here. Bienvenue sur la page officielle du Musée du Louvre....\",\"DisplayUrl\":\"https://www.facebook.com/museedulouvre\",\"Url\":\"https://www.facebook.com/museedulouvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=27&$top=1\",\"type\":\"WebResult\"},\"ID\":\"19eaa0a6-132e-4aa0-a4c0-795defee7c70\",\"Title\":\"Visiting the Louvre Museum in Paris | WhyGo Paris\",\"Description\":\"Even people who aren\u0027t interested in art or museums tend to have the famous Louvre Museum in Paris on their to-do list when they visit this city. It makes\",\"DisplayUrl\":\"www.parislogue.com/places-in-paris/the-louvre-museum-why-you...\",\"Url\":\"http://www.parislogue.com/places-in-paris/the-louvre-museum-why-you-should-go.html\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=28&$top=1\",\"type\":\"WebResult\"},\"ID\":\"eeaf5474-e62a-4959-a86e-4355c5f52f8f\",\"Title\":\"Paris Hotels - hotels in Louvre district\",\"Description\":\"Pariserve - Hotels Paris : selection of the most charming hotels and furnished apartments in Paris. Envied locations, calm and cosy atmosphere, elegance, charming ...\",\"DisplayUrl\":\"www.pariserve.com/louvre.htm\",\"Url\":\"http://www.pariserve.com/louvre.htm\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=29&$top=1\",\"type\":\"WebResult\"},\"ID\":\"3cb9bde6-1199-44d7-a731-a04f234c82e1\",\"Title\":\"Musée du Louvre - Lonely Planet\",\"Description\":\"Louvre Grande Pyramide Almost as dazzling as the masterpieces inside is the 21m-high glass pyramid designed by Chinese-born American architect IM Pei that...\",\"DisplayUrl\":\"www.lonelyplanet.com/.../sights/museums-galleries/musee-du-louvre\",\"Url\":\"http://www.lonelyplanet.com/france/paris/sights/museums-galleries/musee-du-louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=30&$top=1\",\"type\":\"WebResult\"},\"ID\":\"12a0401c-19e0-492d-81c5-c1fb1825c874\",\"Title\":\"Hôtel du Louvre, a Hyatt hotel | 5 star hotels in paris\",\"Description\":\"Hôtel du Louvre, a Hyatt hotel is a 5 star hotel located in the historic centre of Paris, the ideal location for both business and leisure travellers.\",\"DisplayUrl\":\"www.parishoteldulouvre.hyatt.com\",\"Url\":\"http://parishoteldulouvre.hyatt.com/en/hotel/home.html\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=31&$top=1\",\"type\":\"WebResult\"},\"ID\":\"a493ff95-445e-4ad2-876e-d5a9b2c9d9c9\",\"Title\":\"Louvre Group\",\"Description\":\"Cayman Islands. Louvre Group (Cayman) Limited is our local subsidiary. Another well established Caribbean centre... Read more »\",\"DisplayUrl\":\"www.louvregroup.com\",\"Url\":\"http://www.louvregroup.com/\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=32&$top=1\",\"type\":\"WebResult\"},\"ID\":\"dcd3e1fa-19db-4f5b-be63-dc7339e476c6\",\"Title\":\"The Louvre | Rue de Rivoli 1er | Attractions | Time Out Paris\",\"Description\":\"Read Time Out\u0027s review of The Louvre below or click here for our exclusive photo tour of the museum. The world\u0027s largest museum is also its most visited, with...\",\"DisplayUrl\":\"www.timeout.com/paris/en/museums/the-louvre\",\"Url\":\"http://www.timeout.com/paris/en/museums/the-louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=33&$top=1\",\"type\":\"WebResult\"},\"ID\":\"5b87d536-55da-4637-9084-28f4a5cd3b00\",\"Title\":\"Le Louvre - Paris\",\"Description\":\"Amongst the most visited museums in the world, the Louvre has so many treasures within its walls, that it would be impossible to name them all.\",\"DisplayUrl\":\"paris.arounder.com/en/museums/louvre\",\"Url\":\"http://paris.arounder.com/en/museums/louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=34&$top=1\",\"type\":\"WebResult\"},\"ID\":\"6e0a45f2-f80e-429d-825b-a55d171fd926\",\"Title\":\"louvre - definition of louvre in English from the Oxford ...\",\"Description\":\"More The first sense recorded was to describe a domed structure on a roof with side openings for ventilation: louvre comes from Old French lover, lovier ‘skylight ...\",\"DisplayUrl\":\"www.oxforddictionaries.com/definition/english/louvre\",\"Url\":\"http://www.oxforddictionaries.com/definition/english/louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=35&$top=1\",\"type\":\"WebResult\"},\"ID\":\"715c88f1-b430-493a-b911-491d97fe0df4\",\"Title\":\"Info Please – Paris France – The Louvre\",\"Description\":\"Louvre , foremost French museum of art, located in Paris. The building was a royal fortress and palace built by Philip II in the late 12th\",\"DisplayUrl\":\"www.infoplease.com/encyclopedia/entertainment/louvre.html\",\"Url\":\"http://www.infoplease.com/encyclopedia/entertainment/louvre.html\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=36&$top=1\",\"type\":\"WebResult\"},\"ID\":\"f712674b-6856-4922-8ffb-f4b929c8ba8a\",\"Title\":\"Louvre - Paris Hotels - Find Hotels Near Louvre - Paris in ...\",\"Description\":\"View Louvre - Paris hotels available in Paris. Marriott offers many hotels near Louvre - Paris to choose from. Reserve your hotel room today.\",\"DisplayUrl\":\"www.marriott.com/hotel-search/louvre.hotels.rooms\",\"Url\":\"http://www.marriott.com/hotel-search/louvre.hotels.rooms/\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=37&$top=1\",\"type\":\"WebResult\"},\"ID\":\"7e2388ac-d689-4b68-a2b4-c2aaeb5ef687\",\"Title\":\"louvre | eBay - Electronics, Cars, Fashion, Collectibles ...\",\"Description\":\"Find great deals on eBay for louvre louvre book. Shop with confidence.\",\"DisplayUrl\":\"www.ebay.com/sch/i.html?_nkw=louvre\",\"Url\":\"http://www.ebay.com/sch/i.html?_nkw=louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=38&$top=1\",\"type\":\"WebResult\"},\"ID\":\"119253cc-c328-4ac0-9c79-508404d90c52\",\"Title\":\"Louvre Museum History, Facts & Location – Paris, France\",\"Description\":\"The Louvre is the national museum of France. It is situated in the capital city of Paris. The museum is considered by many to be the best in the world.\",\"DisplayUrl\":\"famouswonders.com/louvre-museum-in-paris\",\"Url\":\"http://famouswonders.com/louvre-museum-in-paris/\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=39&$top=1\",\"type\":\"WebResult\"},\"ID\":\"a9185d3a-534d-4697-97eb-37defa48ce3c\",\"Title\":\"The Louvre Museum in Paris - Architecture - Famous ...\",\"Description\":\"Learn about the architecture of the famous Louvre Museum in Paris, France\",\"DisplayUrl\":\"architecture.about.com/.../ig/Museum-Architecture/The-Louvre-.htm\",\"Url\":\"http://architecture.about.com/od/greatbuildings/ig/Museum-Architecture/The-Louvre-.htm\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=40&$top=1\",\"type\":\"WebResult\"},\"ID\":\"c72884f7-0993-4f42-b4e0-c2016dd1bb30\",\"Title\":\"The Louvre, Paris, France panorama in Paris - 360Cities\",\"Description\":\"Louvre Museum — is a historic monument in Paris and the national museum of France. It is a central landmark of the city, located on the Right Bank of the Seine in ...\",\"DisplayUrl\":\"www.360cities.net/image/france-paris-louvre\",\"Url\":\"http://www.360cities.net/image/france-paris-louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=41&$top=1\",\"type\":\"WebResult\"},\"ID\":\"c15fe7b0-1b0d-4aa8-935f-ecb071d9e6e3\",\"Title\":\"Louvre | Learn everything there is to know about Louvre at ...\",\"Description\":\"Louvre, foremost French museum of art, located in Paris. The building was a royal fortress and palace built by Philip II in the late 12th cent.\",\"DisplayUrl\":\"www.reference.com/browse/Louvre\",\"Url\":\"http://www.reference.com/browse/Louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=42&$top=1\",\"type\":\"WebResult\"},\"ID\":\"561e5df2-4381-44e9-b33e-f2ac51597ce2\",\"Title\":\"Musée du Louvre - Paris tourist office - Official website\",\"Description\":\"The Louvre Museum, former residence of the kings of France, has for two centuries been one of the biggest museums in the world. Its collections are spread over 8 ...\",\"DisplayUrl\":\"en.parisinfo.com/paris-museum-monument/71065/Musée-du-Louvre\",\"Url\":\"http://en.parisinfo.com/paris-museum-monument/71065/Mus%C3%A9e-du-Louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=43&$top=1\",\"type\":\"WebResult\"},\"ID\":\"9de5bb1b-e244-4fb1-8d62-25a2b76e5a7c\",\"Title\":\"Musée du Louvre on the App Store on iTunes\",\"Description\":\"Description Musée du Louvre official application To celebrate the success of the official Louvre App, we’ve developed a new version with even more ...\",\"DisplayUrl\":\"https://itunes.apple.com/us/app/musee-du-louvre/id337339103\",\"Url\":\"https://itunes.apple.com/us/app/musee-du-louvre/id337339103?mt=8\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=44&$top=1\",\"type\":\"WebResult\"},\"ID\":\"3ac1ee02-d8e3-408d-8785-57b3102e089e\",\"Title\":\"Louvre | France in Photos\",\"Description\":\"Now a large museum, the Louvre was initially a royal Palace. Louis XIV decided to move the French kings residence to Versailles, and it was subsequently used for the ...\",\"DisplayUrl\":\"www.france-in-photos.com/paris/louvre\",\"Url\":\"http://www.france-in-photos.com/paris/louvre/\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=45&$top=1\",\"type\":\"WebResult\"},\"ID\":\"89a163c6-e75c-4efa-b7cc-16cd9809f238\",\"Title\":\"The Louvre Museum - SSQQ\",\"Description\":\"THE DA VINCI CODE EFFECT. Thanks to the Da Vinci Code, Louvre Museum Experiences Record Year in 2006 PARIS, Jan. 3, 2006 (AP) The Louvre Museum in ...\",\"DisplayUrl\":\"ssqq.com/archive/louvre01.htm\",\"Url\":\"http://ssqq.com/archive/louvre01.htm\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=46&$top=1\",\"type\":\"WebResult\"},\"ID\":\"426b8a66-ab45-4dac-9ea8-7717289db09c\",\"Title\":\"Louvre - Wikimedia Commons\",\"Description\":\"The Louvre is a museum in Paris. Remote view of Tuileries gardens and Louvre museum (in the middle, left of the Seine River in Paris, ...\",\"DisplayUrl\":\"commons.wikimedia.org/wiki/Louvre\",\"Url\":\"http://commons.wikimedia.org/wiki/Louvre\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=47&$top=1\",\"type\":\"WebResult\"},\"ID\":\"7bef5669-995d-4290-a580-9ce48a2680c2\",\"Title\":\"Louvre Tours, Paris Tours & Day Trips | My Louvre Tour\",\"Description\":\"MyLouvreTour.com is an officially licensed tour operator, recognized by the Louvre to skip waiting in the long line to access the Louvre Museums via pre-reserved entry.\",\"DisplayUrl\":\"www.mylouvretour.com\",\"Url\":\"http://www.mylouvretour.com/\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=48&$top=1\",\"type\":\"WebResult\"},\"ID\":\"aadbda94-c834-4105-97c3-6e770279d543\",\"Title\":\"Louvre Gifts & Merchandise | Louvre Gift Ideas & Apparel ...\",\"Description\":\"Shop our large selection of Louvre gifts, t-shirts, posters and stickers starting at $5 . Unique Louvre designs. Fast shipping.\",\"DisplayUrl\":\"www.cafepress.com/+louvre+gifts\",\"Url\":\"http://www.cafepress.com/+louvre+gifts\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=49&$top=1\",\"type\":\"WebResult\"},\"ID\":\"51637ad6-f9f1-4c76-b72f-b8e96fbe1698\",\"Title\":\"Amazon.com: Musee du Louvre: Books\",\"Description\":\"Discover books, read about the author, find related products, and more. More about . Musée du Louvre\",\"DisplayUrl\":\"www.amazon.com/...page=1&rh=n%3A283155%2Ck%3AMusee%20du%20Louvre\",\"Url\":\"http://www.amazon.com/s?ie=UTF8&page=1&rh=n%3A283155%2Ck%3AMusee%20du%20Louvre\"}],\"__next\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\u0027Louvre\u0027&$skip=50&$top=50\"}}";
    }
    
    public static String search(String query){        
    	String accountKey = API_KEY;
    	String searchText = query;
    	StringBuilder response = new StringBuilder();
    	String output;	        	       
    	
    	//Replace all spaces with URL encoded space.
        searchText = searchText.replaceAll(" ", "%20");        
      
        byte[] accountKeyBytes = Base64.encodeBase64((accountKey + ":" + accountKey).getBytes());
        String accountKeyEnc = new String(accountKeyBytes);
    	
		try{
		    URL url = new URL("https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=%27" + searchText + "%27&$top=50&$format=json");        
			
		    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
			
			conn.setRequestMethod("GET");
			conn.setRequestProperty("Authorization", "Basic " + accountKeyEnc);
			
		    BufferedReader br = new BufferedReader(new InputStreamReader((conn.getInputStream())));		    
		    		    
		    while ((output = br.readLine()) != null) {
		        response.append(output);	              
		    }
		    
		    conn.disconnect();		    
		} 
        catch (MalformedURLException e1) {
	         // TODO Auto-generated catch block
	         e1.printStackTrace();
	    } 
		catch (IOException e) {
	         // TODO Auto-generated catch block
	        e.printStackTrace();
	    }
		
		return response.toString();
    }
}